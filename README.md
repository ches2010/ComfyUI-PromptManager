# ComfyUI提示词管理器插件

这是一个ComfyUI插件，提供便捷的提示词管理功能，包括保存提示词到本地文件、从本地文件加载提示词以及随机提示词组合功能。

## 功能特点

### 1. 提示词保存
- 将当前节点的提示词文本保存到本地指定路径下的文本文件
- 支持.txt格式文件保存
- 提供文件选择对话框，方便用户选择保存位置

### 2. 提示词加载
- 从本地指定路径的文本文件中读取提示词并填充到节点
- 支持读取.txt格式文件
- 提供文件选择对话框，方便用户选择文件

### 3. 提示词随机组合
- 从包含多个提示词的文本文件中（以逗号分隔）随机抽取组合生成新的提示词
- 自动随机选择1-3个提示词进行组合
- 支持从大型提示词库中随机生成多样化的提示词组合

## 安装方法

### 方法1：通过ComfyUI Manager安装（推荐）
1. 打开ComfyUI，进入ComfyUI Manager
2. 在"Install Custom Nodes"标签页中搜索"ComfyUI-PromptManager"
3. 点击安装按钮
4. 安装完成后重启ComfyUI

### 方法2：通过Git Clone安装
1. 打开终端/命令提示符
2. 进入ComfyUI的`custom_nodes`目录：
   ```bash
   cd /path/to/ComfyUI/custom_nodes
   ```
3. 克隆仓库：
   ```bash
   git clone https://github.com/ches2010/ComfyUI-PromptManager.git
   ```
4. 启动ComfyUI，插件会自动安装所需依赖
5. 安装完成后即可使用

### 方法3：手动安装
1. 下载本插件的ZIP压缩包
2. 解压到ComfyUI的`custom_nodes`目录下
3. 手动运行安装脚本：
   ```bash
   cd /path/to/ComfyUI/custom_nodes/ComfyUI-PromptManager
   python install.py
   ```
4. 启动ComfyUI

## 依赖说明
- 本插件需要Tkinter库支持（通常随Python一起安装）
- 安装过程中会自动检查并安装所需依赖
- 如遇Tkinter安装问题，请参考系统相关文档手动安装

## 使用方法

1. 在ComfyUI中，从"提示词管理"类别中拖拽"提示词管理器"节点到工作区
2. 使用节点上的"操作"下拉菜单选择需要执行的操作：
   - `none`：不执行任何操作
   - `save`：保存当前提示词
   - `load`：加载提示词
   - `random_combination`：随机组合提示词
3. 点击"Queue Prompt"按钮执行操作
4. 节点的输出可以连接到其他需要提示词的节点

## 操作说明

### 保存提示词
1. 在提示词输入框中输入或粘贴提示词
2. 从"操作"下拉菜单中选择"save"
3. 点击"Queue Prompt"按钮
4. 在弹出的文件对话框中选择保存路径和文件名
5. 点击"保存"按钮

### 加载提示词
1. 从"操作"下拉菜单中选择"load"
2. 点击"Queue Prompt"按钮
3. 在弹出的文件对话框中选择要加载的提示词文件
4. 点击"打开"按钮
5. 提示词将自动填充到输入框中

### 随机组合提示词
1. 准备一个包含多个提示词的文本文件，提示词之间用逗号分隔
   例如：`futuristic cityscape, neon lights, cyberpunk style, rain effect, Blade Runner`
2. 从"操作"下拉菜单中选择"random_combination"
3. 点击"Queue Prompt"按钮
4. 在弹出的文件对话框中选择提示词库文件
5. 点击"打开"按钮
6. 节点将自动从文件中随机选择1-3个提示词进行组合，并显示在输出中

## 注意事项

1. 文件操作需要相应的文件系统权限
2. 随机组合功能假设提示词文件中的提示词是以逗号分隔的
3. 大文件的加载可能会影响性能
4. 操作执行后，状态信息会显示在节点的"status"输出中
5. 确保文件对话框没有被其他窗口遮挡

## 示例提示词库文件

插件包含一个`example_prompts.txt`文件，包含多种风格的提示词示例，可直接用于测试随机组合功能。

## 版本历史

- v1.0.0 (2025-10-30): 初始版本，实现基本功能，支持自动安装